# Career-HY RAG ì‹¤í—˜ íŒŒì´í”„ë¼ì¸

Career-HY RAG ì‹œìŠ¤í…œì˜ ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì‹¤í—˜í•˜ì—¬ ê²€ìƒ‰ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê¸° ìœ„í•œ íŒŒì´í”„ë¼ì¸ìž…ë‹ˆë‹¤.

## ðŸŽ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ëª©ì 
- **ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”**: ë‹¤ì–‘í•œ ìž„ë² ë”© ëª¨ë¸, ì²­í‚¹ ì „ëžµ, ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ë¹„êµ
- **ì²´ê³„ì  ì‹¤í—˜**: YAML ê¸°ë°˜ ì„¤ì •ìœ¼ë¡œ ìž¬í˜„ ê°€ëŠ¥í•œ ì‹¤í—˜ í™˜ê²½ ì œê³µ
- **ë¹„ìš© íš¨ìœ¨ì„±**: ìž„ë² ë”© ìºì‹±ì„ í†µí•œ OpenAI API ë¹„ìš© ì ˆì•½

### ì£¼ìš” íŠ¹ì§•
- ðŸ³ **Docker ê¸°ë°˜**: ì¼ê´€ëœ ì‹¤í—˜ í™˜ê²½ ë³´ìž¥
- ðŸ’¾ **ìž„ë² ë”© ìºì‹±**: ë™ì¼ ì„¤ì • ìž¬ì‹¤í—˜ ì‹œ API ë¹„ìš© ì ˆì•½
- ðŸ“Š **ë‹¤ì–‘í•œ í‰ê°€ ì§€í‘œ**: Recall@k, Precision@k, MRR, MAP, nDCG@k
- ðŸ”§ **ëª¨ë“ˆí˜• ì•„í‚¤í…ì²˜**: ì‰¬ìš´ í™•ìž¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜
- ðŸ“ **YAML ì„¤ì •**: ì½”ë“œ ìˆ˜ì • ì—†ì´ ì‹¤í—˜ íŒŒë¼ë¯¸í„° ì¡°ì •

## ðŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
Experiment/
â”œâ”€â”€ configs/                 # ì‹¤í—˜ ì„¤ì • íŒŒì¼ë“¤
â”‚   â”œâ”€â”€ baseline.yaml       # ë² ì´ìŠ¤ë¼ì¸ ì„¤ì • (í˜„ìž¬ ì„œë¹„ìŠ¤)
â”‚   â””â”€â”€ chunking_test.yaml  # ì²­í‚¹ ì „ëžµ ì‹¤í—˜ ì„¤ì •
â”œâ”€â”€ core/                   # í•µì‹¬ íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ interfaces/        # ì¶”ìƒ ì¸í„°íŽ˜ì´ìŠ¤ (ABC)
â”‚   â”œâ”€â”€ pipeline.py        # ë©”ì¸ ì‹¤í—˜ íŒŒì´í”„ë¼ì¸
â”‚   â””â”€â”€ config.py         # ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ implementations/       # êµ¬í˜„ì²´ë“¤
â”‚   â”œâ”€â”€ embedders/        # ìž„ë² ë”© ëª¨ë¸ (OpenAI ë“±)
â”‚   â”œâ”€â”€ chunkers/         # ì²­í‚¹ ì „ëžµ (RecursiveCharacterTextSplitter ë“±)
â”‚   â”œâ”€â”€ retrievers/       # ê²€ìƒ‰ ì‹œìŠ¤í…œ (ChromaDB ë“±)
â”‚   â””â”€â”€ evaluators/       # í‰ê°€ ì§€í‘œ ê³„ì‚°
â”œâ”€â”€ utils/                # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ data_loader.py    # S3 ë°ì´í„° ë¡œë“œ
â”‚   â”œâ”€â”€ embedding_cache.py # ìž„ë² ë”© ìºì‹± ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ gt_converter.py   # Ground Truth CSVâ†’JSONL ë³€í™˜ê¸°
â”‚   â””â”€â”€ factory.py        # ì»´í¬ë„ŒíŠ¸ íŒ©í† ë¦¬
â”œâ”€â”€ data/                 # Ground Truth ë°ì´í„°
â”‚   â”œâ”€â”€ test_queries.jsonl      # í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ (575ê°œ)
â”‚   â”œâ”€â”€ test_queries_small.jsonl # ìž‘ì€ í…ŒìŠ¤íŠ¸ ì…‹ (3ê°œ)
â”‚   â””â”€â”€ ground_truth.jsonl      # Ground Truth ë°ì´í„°
â”œâ”€â”€ cache/                # ìž„ë² ë”© ìºì‹œ ì €ìž¥ì†Œ
â”œâ”€â”€ results/              # ì‹¤í—˜ ê²°ê³¼
â”œâ”€â”€ run_experiment.sh     # ë©”ì¸ ì‹¤í—˜ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docker-compose.yml    # Docker êµ¬ì„±
â”œâ”€â”€ Dockerfile           # Docker ì´ë¯¸ì§€ ì •ì˜
â””â”€â”€ requirements.txt     # Python ì˜ì¡´ì„±
```

## ðŸš€ ë¹ ë¥¸ ì‹œìž‘

### 1. í™˜ê²½ ì„¤ì •

```bash
# 1. .env íŒŒì¼ ìƒì„± (API í‚¤ ì„¤ì •)
cat > .env << 'EOF'
# OpenAI API ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here

# AWS ì„¤ì • (S3 ì ‘ê·¼ìš©)
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here
AWS_DEFAULT_REGION=ap-northeast-2

# S3 ë²„í‚· ì„¤ì •
S3_BUCKET_NAME=career-hi
EOF

# 2. Docker í™•ì¸
docker --version
docker compose --version
```

### 2. ë² ì´ìŠ¤ë¼ì¸ ì‹¤í—˜ ì‹¤í–‰

```bash
# ë² ì´ìŠ¤ë¼ì¸ ì‹¤í—˜ (í˜„ìž¬ ì„œë¹„ìŠ¤ì™€ ë™ì¼í•œ ì„¤ì •)
./run_experiment.sh configs/baseline.yaml
```

### 3. ì²­í‚¹ ì „ëžµ ì‹¤í—˜

```bash
# ì²­í‚¹ ì „ëžµ ì‹¤í—˜ (RecursiveCharacterTextSplitter)
./run_experiment.sh configs/chunking_test.yaml
```

## ðŸ“Š ì‹¤í—˜ ì„¤ì •

### YAML ì„¤ì • íŒŒì¼ êµ¬ì¡°

```yaml
# ì‹¤í—˜ ê¸°ë³¸ ì •ë³´
experiment_name: "baseline"
description: "í˜„ìž¬ ì„œë¹„ìŠ¤ì™€ ë™ì¼í•œ ë² ì´ìŠ¤ë¼ì¸ ì„¤ì •"
output_dir: "results"

# ìž„ë² ë”© ì„¤ì •
embedder:
  type: "openai"
  model_name: "text-embedding-ada-002"
  batch_size: 5

# ì²­í‚¹ ì„¤ì •
chunker:
  type: "no_chunk"  # ë˜ëŠ” "recursive"
  chunk_size: null
  chunk_overlap: null

# ê²€ìƒ‰ ì‹œìŠ¤í…œ ì„¤ì •
retriever:
  type: "chroma"
  collection_name: "job-postings-baseline"
  persist_directory: "/tmp/chroma_baseline"
  top_k: 10

# LLM ì„¤ì •
llm:
  type: "openai"
  model_name: "gpt-4o-mini"
  temperature: 0.7
  max_tokens: 1000

# ë°ì´í„° ì„¤ì •
data:
  s3_bucket: "career-hi"
  pdf_prefix: "initial-dataset/pdf/"
  json_prefix: "initial-dataset/json/"
  test_queries_path: "data/test_queries.jsonl"

# í‰ê°€ ì„¤ì •
evaluation:
  metrics: ["recall@k", "precision@k", "mrr", "map", "ndcg@k"]
  k_values: [1, 3, 5, 10]
```

## ðŸ”§ ì§€ì›í•˜ëŠ” êµ¬í˜„ì²´ë“¤

### ìž„ë² ë”© ëª¨ë¸
- **OpenAI**: `text-embedding-ada-002`, `text-embedding-3-small`, `text-embedding-3-large`

### ì²­í‚¹ ì „ëžµ
- **no_chunk**: ì²­í‚¹ ì—†ìŒ (ì „ì²´ ë¬¸ì„œ ì‚¬ìš©)
- **recursive**: RecursiveCharacterTextSplitter (ì„¤ì • ê°€ëŠ¥í•œ í¬ê¸°/ì˜¤ë²„ëž©)

### ê²€ìƒ‰ ì‹œìŠ¤í…œ
- **ChromaDB**: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ (ì½”ì‚¬ì¸ ìœ ì‚¬ë„)

### í‰ê°€ ì§€í‘œ

#### Recall@k (ìž¬í˜„ìœ¨)
- **ì •ì˜**: ì „ì²´ ê´€ë ¨ ë¬¸ì„œ ì¤‘ ìƒìœ„ kê°œ ê²€ìƒ‰ ê²°ê³¼ì— í¬í•¨ëœ ê´€ë ¨ ë¬¸ì„œì˜ ë¹„ìœ¨
- **ê³„ì‚°**: `Recall@k = (ìƒìœ„ kê°œ ì¤‘ ê´€ë ¨ ë¬¸ì„œ ìˆ˜) / (ì „ì²´ ê´€ë ¨ ë¬¸ì„œ ìˆ˜)`
- **ì˜ë¯¸**: ë†“ì¹œ ê´€ë ¨ ë¬¸ì„œê°€ ì–¼ë§ˆë‚˜ ì ì€ì§€ ì¸¡ì • (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **ì˜ˆì‹œ**: ê´€ë ¨ ë¬¸ì„œ 10ê°œ ì¤‘ ìƒìœ„ 5ê°œì—ì„œ 3ê°œ ë°œê²¬ â†’ Recall@5 = 0.3

#### Precision@k (ì •ë°€ë„)
- **ì •ì˜**: ìƒìœ„ kê°œ ê²€ìƒ‰ ê²°ê³¼ ì¤‘ ì‹¤ì œë¡œ ê´€ë ¨ ìžˆëŠ” ë¬¸ì„œì˜ ë¹„ìœ¨
- **ê³„ì‚°**: `Precision@k = (ìƒìœ„ kê°œ ì¤‘ ê´€ë ¨ ë¬¸ì„œ ìˆ˜) / k`
- **ì˜ë¯¸**: ê²€ìƒ‰ ê²°ê³¼ì˜ ì •í™•ì„± ì¸¡ì • (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **ì˜ˆì‹œ**: ìƒìœ„ 5ê°œ ì¤‘ 3ê°œê°€ ê´€ë ¨ ìžˆìŒ â†’ Precision@5 = 0.6

#### MRR (Mean Reciprocal Rank)
- **ì •ì˜**: ê° ì¿¼ë¦¬ì˜ ì²« ë²ˆì§¸ ê´€ë ¨ ë¬¸ì„œ ìˆœìœ„ì˜ ì—­ìˆ˜ í‰ê· 
- **ê³„ì‚°**: `MRR = (1/|Q|) Ã— Î£(1/rank_i)` (rank_i = ì²« ë²ˆì§¸ ê´€ë ¨ ë¬¸ì„œ ìˆœìœ„)
- **ì˜ë¯¸**: ê´€ë ¨ ë¬¸ì„œê°€ ì–¼ë§ˆë‚˜ ìƒìœ„ì— ìœ„ì¹˜í•˜ëŠ”ì§€ ì¸¡ì • (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **ì˜ˆì‹œ**: ì²« ê´€ë ¨ ë¬¸ì„œê°€ 3ë²ˆì§¸ â†’ RR = 1/3 = 0.333

#### MAP (Mean Average Precision)
- **ì •ì˜**: ê° ì¿¼ë¦¬ì˜ Average Precisionì˜ í‰ê· ê°’
- **ê³„ì‚°**: `MAP = (1/|Q|) Ã— Î£(AP_i)` (AP = ê´€ë ¨ ë¬¸ì„œë³„ Precision í‰ê· )
- **ì˜ë¯¸**: ëª¨ë“  ê´€ë ¨ ë¬¸ì„œ ìˆœìœ„ë¥¼ ê³ ë ¤í•œ ì¢…í•©ì  ì„±ëŠ¥ (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **íŠ¹ì§•**: Precisionê³¼ Recallì„ ëª¨ë‘ ë°˜ì˜í•œ ê· í˜• ìž¡ížŒ ì§€í‘œ

#### nDCG@k (Normalized Discounted Cumulative Gain)
- **ì •ì˜**: ìƒìœ„ kê°œ ê²°ê³¼ì˜ ìˆœìœ„ë³„ ê°€ì¤‘ ì ìˆ˜ë¥¼ ì´ìƒì  ìˆœìœ„ì™€ ë¹„êµí•œ ì •ê·œí™” ì ìˆ˜
- **ê³„ì‚°**: `nDCG@k = DCG@k / IDCG@k`
- **ì˜ë¯¸**: ìˆœìœ„ê°€ ë†’ì„ìˆ˜ë¡ ë” ì¤‘ìš”í•˜ë‹¤ê³  ê°€ì •í•œ ì„±ëŠ¥ ì¸¡ì • (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **íŠ¹ì§•**: ìƒìœ„ ìˆœìœ„ì— ìžˆëŠ” ê´€ë ¨ ë¬¸ì„œì— ë” ë†’ì€ ê°€ì¤‘ì¹˜ ë¶€ì—¬

### ì§€í‘œ í•´ì„ ê°€ì´ë“œ
- **0.0 ~ 0.3**: ë‚®ì€ ì„±ëŠ¥ (ê°œì„  í•„ìš”)
- **0.3 ~ 0.6**: ë³´í†µ ì„±ëŠ¥ (ì¶”ê°€ ìµœì í™” ê¶Œìž¥)
- **0.6 ~ 0.8**: ì¢‹ì€ ì„±ëŠ¥ (ì‹¤ìš©ì  ìˆ˜ì¤€)
- **0.8 ~ 1.0**: ë§¤ìš° ì¢‹ì€ ì„±ëŠ¥ (ìš°ìˆ˜í•œ ì‹œìŠ¤í…œ)

## ðŸŽ­ LangSmith ì •ì„±í‰ê°€ (LLM-as-Judge)

ì‹¤í—˜ íŒŒì´í”„ë¼ì¸ì€ ê²€ìƒ‰ ì„±ëŠ¥ ì§€í‘œ ì™¸ì—ë„ ìƒì„±ëœ ì‘ë‹µì˜ í’ˆì§ˆì„ í‰ê°€í•˜ê¸° ìœ„í•œ LangSmith ê¸°ë°˜ ì •ì„±í‰ê°€ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

### ì •ì„±í‰ê°€ ê°œìš”

#### í‰ê°€ ë°©ì‹: ì´ì¤‘ í‰ê°€ ì‹œìŠ¤í…œ
1. **ê²€ìƒ‰ í‰ê°€**: ì „ì²´ 575ê°œ ì¿¼ë¦¬ì— ëŒ€í•œ ê²€ìƒ‰ ì„±ëŠ¥ ì¸¡ì •
2. **ìƒì„± í‰ê°€**: 15ê°œ ìƒ˜í”Œ ì¿¼ë¦¬ì— ëŒ€í•œ ì‘ë‹µ ìƒì„± ë° ì •ì„±í‰ê°€

#### ìƒ˜í”Œë§ ì „ëžµ: Profile-based Sampling
- **ëª©ì **: ë¹„ìš© íš¨ìœ¨ì ì´ë©´ì„œë„ ëŒ€í‘œì„± ìžˆëŠ” í‰ê°€
- **ë°©ë²•**: MD5 í•´ì‹œ ê¸°ë°˜ ê³ ìœ  ì‚¬ìš©ìž í”„ë¡œí•„ ì‹ë³„
- **ê²°ê³¼**: 575ê°œ ì¿¼ë¦¬ ì¤‘ 15ê°œ ê³ ìœ  í”„ë¡œí•„ ì„ íƒ (93% ë¹„ìš© ì ˆì•½)

### 4ê°€ì§€ ì •ì„±í‰ê°€ ì§€í‘œ

#### 1. Recommendation Quality (ì¶”ì²œ í’ˆì§ˆ)
- **í‰ê°€ ëŒ€ìƒ**: ìƒì„±ëœ ì±„ìš©ê³µê³  ì¶”ì²œì˜ ì „ë°˜ì  í’ˆì§ˆ
- **í‰ê°€ ê¸°ì¤€**:
  - ê´€ë ¨ì„±: ì‚¬ìš©ìž ì§ˆë¬¸ê³¼ ì¶”ì²œ ê³µê³ ì˜ ì—°ê´€ì„±
  - ê°œì¸í™”: ì‚¬ìš©ìž í”„ë¡œí•„ê³¼ ì¶”ì²œì˜ ë§žì¶¤ì„±
  - êµ¬ì²´ì„±: ì¶”ì²œ ì´ìœ ì˜ ìƒì„¸í•¨ê³¼ ìœ ìš©ì„±
- **ì ìˆ˜ ë²”ìœ„**: 1-5ì  (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ**:
```
ë‹¤ìŒ ì±„ìš©ê³µê³  ì¶”ì²œì˜ í’ˆì§ˆì„ 1-5ì ìœ¼ë¡œ í‰ê°€í•´ì£¼ì„¸ìš”.

ì‚¬ìš©ìž ì§ˆë¬¸: {query}
ì‚¬ìš©ìž í”„ë¡œí•„: {user_profile}
ìƒì„±ëœ ì¶”ì²œ: {recommended_jobs}

í‰ê°€ ê¸°ì¤€:
1. ê´€ë ¨ì„±: ì‚¬ìš©ìž ì§ˆë¬¸ê³¼ ì¶”ì²œ ê³µê³ ì˜ ì—°ê´€ì„±
2. ê°œì¸í™”: ì‚¬ìš©ìž í”„ë¡œí•„ê³¼ ì¶”ì²œì˜ ë§žì¶¤ì„±
3. êµ¬ì²´ì„±: ì¶”ì²œ ì´ìœ ì˜ ìƒì„¸í•¨ê³¼ ìœ ìš©ì„±

ì ìˆ˜ (1-5ì ):
ì´ìœ :
```

#### 2. Personalization Score (ê°œì¸í™” ì ìˆ˜)
- **í‰ê°€ ëŒ€ìƒ**: ì‘ë‹µì´ ì‚¬ìš©ìžì—ê²Œ ì–¼ë§ˆë‚˜ ê°œì¸í™”ë˜ì–´ ìžˆëŠ”ê°€
- **í‰ê°€ ê¸°ì¤€**: í”„ë¡œí•„ ìš”ì†Œ(ì „ê³µ, ê´€ì‹¬ì§ë¬´, ìžê²©ì¦ ë“±)ê°€ ì¶”ì²œì— ë°˜ì˜ëœ ì •ë„
- **ì ìˆ˜ ë²”ìœ„**: 1-5ì  (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **íŠ¹ì§•**: ì‚¬ìš©ìžë³„ ë§žì¶¤í˜• ì¡°ì–¸ ì œê³µ ì—¬ë¶€ ì¤‘ì  í‰ê°€

#### 3. Response Helpfulness (ì‘ë‹µ ë„ì›€ ì •ë„)
- **í‰ê°€ ëŒ€ìƒ**: ì·¨ì—… ì¤€ë¹„ìƒì—ê²Œ ì–¼ë§ˆë‚˜ ì‹¤ìš©ì ì¸ ë„ì›€ì´ ë˜ëŠ”ê°€
- **í‰ê°€ ê¸°ì¤€**: ì‹¤ìš©ì ì´ê³  êµ¬ì²´ì ì¸ ì¡°ì–¸ ì œê³µ ì—¬ë¶€
- **ì ìˆ˜ ë²”ìœ„**: 1-5ì  (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **íŠ¹ì§•**: ì‹¤í–‰ ê°€ëŠ¥í•œ êµ¬ì²´ì  íŒê³¼ ì „ëžµ í¬í•¨ ì—¬ë¶€

#### 4. Profile Alignment (í”„ë¡œí•„ ì¼ì¹˜ë„)
- **í‰ê°€ ëŒ€ìƒ**: ì¶”ì²œëœ ê³µê³ ë“¤ì´ ì‚¬ìš©ìž ë°°ê²½ê³¼ ì–¼ë§ˆë‚˜ ìž˜ ë§žëŠ”ê°€
- **í‰ê°€ ê¸°ì¤€**: ì „ê³µ, ê´€ì‹¬ì§ë¬´, ê²½í—˜ê³¼ ì¶”ì²œ ê³µê³ ì˜ ì í•©ì„±
- **ì ìˆ˜ ë²”ìœ„**: 1-5ì  (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)
- **íŠ¹ì§•**: ì¶”ì²œ ê³µê³ ì˜ ì§ë¬´ ìš”êµ¬ì‚¬í•­ê³¼ ì‚¬ìš©ìž í”„ë¡œí•„ì˜ ë§¤ì¹­ë„

### í‰ê°€ ì„¤ì •

#### YAML ì„¤ì •ì—ì„œ LangSmith í™œì„±í™”
```yaml
# LangSmith ê³ í’ˆì§ˆ ì •ì„± í‰ê°€
langsmith:
  enabled: true
  project_name: "career-hy-rag-evaluation"
  judge_model: "gpt-4o-mini"
  metrics:
    - "recommendation_quality"
    - "personalization_score"
    - "response_helpfulness"
    - "profile_alignment"
  max_concurrency: 3
  evaluation_timeout: 300

# ìƒì„± í’ˆì§ˆ í‰ê°€ (ìƒ˜í”Œë§ ì„¤ì •)
evaluation:
  generation:
    target: "sample"
    sample_size: 15
    sample_strategy: "profile_based"
    sample_seed: null
```

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# .env íŒŒì¼ì— LangSmith ì„¤ì • ì¶”ê°€
LANGCHAIN_TRACING_V2=true
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_API_KEY=your_langsmith_api_key
LANGCHAIN_PROJECT=career-hy-rag-evaluation
```

### ê²°ê³¼ í•´ì„

#### ì •ì„±í‰ê°€ ê²°ê³¼ ì˜ˆì‹œ
```json
{
  "generation_evaluation": {
    "sample_count": 15,
    "langsmith_metrics": [
      {
        "metric": "recommendation_quality",
        "score": 4.0,
        "reasoning": "í‰ê·  ì ìˆ˜: 4.000",
        "details": {
          "individual_scores": [4.0, 4.0, 4.0, ...],
          "individual_reasonings": ["ì¶”ì²œì´ ë§¤ìš° ì ì ˆí•¨", ...]
        }
      }
    ]
  }
}
```

#### ê°œë³„ ì¿¼ë¦¬ í‰ê°€ ê²°ê³¼ í™•ì¸ ë°©ë²•
1. **í‰ê·  ì ìˆ˜**: `langsmith_metrics[].score`
2. **ê°œë³„ ì ìˆ˜**: `langsmith_metrics[].details.individual_scores`
3. **ê°œë³„ í‰ê°€ ì´ìœ **: `langsmith_metrics[].details.individual_reasonings`

#### ì ìˆ˜ í•´ì„ ê°€ì´ë“œ
- **4.5-5.0ì **: ìš°ìˆ˜í•œ í’ˆì§ˆ (í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ)
- **4.0-4.4ì **: ì¢‹ì€ í’ˆì§ˆ (ì•½ê°„ì˜ ê°œì„  ì—¬ì§€)
- **3.5-3.9ì **: ë³´í†µ í’ˆì§ˆ (ê°œì„  í•„ìš”)
- **3.0-3.4ì **: ê°œì„  í•„ìš” (ì¶”ê°€ ìµœì í™” ê¶Œìž¥)
- **1.0-2.9ì **: ë¶€ì¡±í•œ í’ˆì§ˆ (ëŒ€í­ ê°œì„  í•„ìš”)

### ë¹„ìš© ìµœì í™” ì „ëžµ

#### ìƒ˜í”Œë§ì„ í†µí•œ ë¹„ìš© ì ˆì•½
- **ì „ì²´ í‰ê°€**: 575ê°œ ì¿¼ë¦¬ Ã— 4ê°œ ì§€í‘œ = 2,300íšŒ LLM í˜¸ì¶œ
- **ìƒ˜í”Œë§ í‰ê°€**: 15ê°œ ì¿¼ë¦¬ Ã— 4ê°œ ì§€í‘œ = 60íšŒ LLM í˜¸ì¶œ
- **ë¹„ìš© ì ˆì•½**: ì•½ 93% ì ˆì•½í•˜ë©´ì„œë„ ëŒ€í‘œì„± ìœ ì§€

#### ë™ì‹œ ì‹¤í–‰ ì œí•œ
- `max_concurrency: 3`: API ìœ¨í•œ ì œí•œ ë°©ì§€
- `evaluation_timeout: 300`: í‰ê°€ ì‹œê°„ ì œí•œìœ¼ë¡œ ë¬´í•œ ëŒ€ê¸° ë°©ì§€

### LangSmith ì›¹ ì¸í„°íŽ˜ì´ìŠ¤

í‰ê°€ ì‹¤í–‰ ì¤‘ LangSmith ì›¹ì‚¬ì´íŠ¸(https://smith.langchain.com)ì—ì„œ ì‹¤ì‹œê°„ ì¶”ì  ê°€ëŠ¥:
- í”„ë¡œì íŠ¸: `career-hy-rag-evaluation`
- ê°œë³„ í‰ê°€ ì‹¤í–‰ ê³¼ì • ë° ê²°ê³¼ í™•ì¸
- í‰ê°€ í”„ë¡¬í”„íŠ¸ì™€ ì‘ë‹µ ìƒì„¸ ë¶„ì„

## ðŸ’¾ ìž„ë² ë”© ìºì‹± ì‹œìŠ¤í…œ

### ìºì‹œ ë™ìž‘ ì›ë¦¬
1. **ìºì‹œ í‚¤ ìƒì„±**: `{embedding_model}_{chunking_strategy}`
2. **ì²« ì‹¤í–‰**: OpenAI API í˜¸ì¶œ â†’ ìž„ë² ë”© ìƒì„± â†’ ìºì‹œ ì €ìž¥
3. **ìž¬ì‹¤í–‰**: ìºì‹œ í™•ì¸ â†’ ê¸°ì¡´ ìž„ë² ë”© ë¡œë“œ (API í˜¸ì¶œ ì—†ìŒ)

### ìºì‹œ íŒŒì¼ êµ¬ì¡°
```
cache/embeddings/{cache_key}/
â”œâ”€â”€ embeddings.npy          # NumPy ë°°ì—´ (1536ì°¨ì› ë²¡í„°ë“¤)
â”œâ”€â”€ processed_documents.pkl # ì²˜ë¦¬ëœ ë¬¸ì„œ í…ìŠ¤íŠ¸
â””â”€â”€ metadata.json          # ìºì‹œ ë©”íƒ€ë°ì´í„°
```

### ìºì‹œ ê´€ë¦¬

```bash
# ìºì‹œ ëª©ë¡ í™•ì¸
ls cache/embeddings/

# íŠ¹ì • ìºì‹œ ì‚­ì œ (ìƒˆë¡œìš´ ìž„ë² ë”© ìƒì„±í•˜ë ¤ë©´)
rm -rf cache/embeddings/text_embedding_ada_002_no_chunk

# ì „ì²´ ìºì‹œ ì‚­ì œ
rm -rf cache/embeddings/*
```

## ðŸ“ˆ ì‹¤í—˜ ê²°ê³¼ ë¶„ì„

### ê²°ê³¼ íŒŒì¼ë“¤
ì‹¤í—˜ ì™„ë£Œ í›„ `results/{experiment_name}/` ë””ë ‰í† ë¦¬ì— ì €ìž¥:

```
results/baseline/
â”œâ”€â”€ results_{experiment_id}.json      # ì£¼ìš” ì§€í‘œ ìš”ì•½
â””â”€â”€ detailed_results_{experiment_id}.jsonl # ìƒì„¸ ì¿¼ë¦¬ë³„ ê²°ê³¼
```

### ë² ì´ìŠ¤ë¼ì¸ ì‹¤í—˜ ê²°ê³¼ (2025-09-23)

**ì‹¤í—˜ ì„¤ì •**: text-embedding-ada-002 + no_chunk + ChromaDB + GPT-4o-mini
**ë°ì´í„°**: 1,473ê°œ ë¬¸ì„œ, 575ê°œ ì¿¼ë¦¬
**ì†Œìš”ì‹œê°„**: 813ì´ˆ (ì•½ 13.5ë¶„)

```json
{
  "evaluation_results": [
    {"metric": "recall@1", "score": 0.0052},
    {"metric": "recall@3", "score": 0.0122},
    {"metric": "recall@5", "score": 0.0296},
    {"metric": "recall@10", "score": 0.0591},
    {"metric": "precision@1", "score": 0.0052},
    {"metric": "precision@3", "score": 0.0041},
    {"metric": "precision@5", "score": 0.0059},
    {"metric": "precision@10", "score": 0.0059},
    {"metric": "mrr", "score": 0.0161},
    {"metric": "map", "score": 0.0161},
    {"metric": "ndcg@1", "score": 0.0052},
    {"metric": "ndcg@3", "score": 0.0115},
    {"metric": "ndcg@5", "score": 0.0195},
    {"metric": "ndcg@10", "score": 0.0296}
  ]
}
```

**ê²°ê³¼ í•´ì„**: ë² ì´ìŠ¤ë¼ì¸ ì„±ëŠ¥ì€ ì˜ˆìƒë³´ë‹¤ ë‚®ê²Œ ë‚˜ì™”ìŠµë‹ˆë‹¤. ì´ëŠ” ì²­í‚¹ ì—†ì´ ì „ì²´ ë¬¸ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¸ì´ì¦ˆê°€ ë§Žê³ , í˜„ìž¬ ì„¤ì •ì´ ìµœì í™”ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. í–¥í›„ ì²­í‚¹ ì „ëžµê³¼ ë‹¤ë¥¸ ìž„ë² ë”© ëª¨ë¸ì„ í†µí•œ ì„±ëŠ¥ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.

## ðŸ” í† í° ì œí•œ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ ìƒí™©
- ì¼ë¶€ í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ê°€ OpenAI í† í° ì œí•œ(8,192) ì´ˆê³¼
- íŠ¹ížˆ ìˆ˜ê°• ì´ë ¥ì´ ê¸´ ì¿¼ë¦¬ë“¤ì—ì„œ ë°œìƒ

### í•´ê²° ë°©ë²•
ìžë™ ìˆ˜ê°• ì´ë ¥ íŠ¸ë¦¬ë° êµ¬í˜„:
1. **í† í° ìˆ˜ ì²´í¬**: tiktokenì„ ì‚¬ìš©í•œ ì •í™•í•œ í† í° ê³„ì‚°
2. **ìŠ¤ë§ˆíŠ¸ íŠ¸ë¦¬ë°**: ê¸°ë³¸ ì •ë³´ ìœ ì§€, ìˆ˜ê°• ê³¼ëª©ë§Œ ë’¤ì—ì„œë¶€í„° ì œê±°
3. **ìµœì†Œ ë³´ìž¥**: ìµœì†Œ 5ê°œ ê³¼ëª©ì€ í•­ìƒ ìœ ì§€
4. **ë¡œê¹…**: íŠ¸ë¦¬ë° ê³¼ì •ê³¼ ê²°ê³¼ë¥¼ ìƒì„¸ížˆ ê¸°ë¡

### íŠ¸ë¦¬ë° ë¡œê·¸ ì˜ˆì‹œ
```
í† í° ì´ˆê³¼ ê°ì§€ (12126), ìˆ˜ê°• ì´ë ¥ íŠ¸ë¦¬ë° ì‹œë„...
íŠ¸ë¦¬ë° ì„±ê³µ: 12126 â†’ 7438 í† í°
```

## ðŸ“Š ë°ì´í„° ì†ŒìŠ¤

### S3 ë°ì´í„°
- **ë²„í‚·**: `career-hi`
- **PDF ê²½ë¡œ**: `initial-dataset/pdf/` (1,473ê°œ íŒŒì¼)
- **JSON ê²½ë¡œ**: `initial-dataset/json/` (1,473ê°œ íŒŒì¼)
- **íŽ˜ì´ì§€ë„¤ì´ì…˜**: ëª¨ë“  S3 ê°ì²´ ìžë™ ì²˜ë¦¬

### Ground Truth
- **í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬**: 575ê°œ (ì‹¤ì œ ì‚¬ìš©ìž í”„ë¡œí•„ ê¸°ë°˜)
- **Ground Truth**: ê° ì¿¼ë¦¬ë³„ ê´€ë ¨ ì±„ìš©ê³µê³  ID ë§¤í•‘

## ðŸ”„ Ground Truth ë°ì´í„° ê´€ë¦¬

### ìƒˆë¡œìš´ GT CSV â†’ JSONL ë³€í™˜

ìƒˆë¡œìš´ Ground Truth CSV íŒŒì¼ì„ ë°›ì•˜ì„ ë•Œ ì‹¤í—˜ì— ì‚¬ìš©í•  JSONL í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ìœ í‹¸ë¦¬í‹°:

```bash
# ëŒ€í™”í˜• ë³€í™˜ (ì»¬ëŸ¼ ë§¤í•‘ì„ ìžë™ ê°ì§€í•˜ê³  í™•ì¸)
python utils/gt_converter.py new_ground_truth.csv data/test_queries_new.jsonl

# ì»¬ëŸ¼ ë§¤í•‘ ë¯¸ë¦¬ ì§€ì •
python utils/gt_converter.py input.csv output.jsonl --mapping "query:query_text,ground_truth_docs:relevant_doc_ids"

# ê¸°ì¡´ JSONL íŒŒì¼ ê²€ì¦
python utils/gt_converter.py --validate data/test_queries.jsonl
```

### ì§€ì›í•˜ëŠ” CSV í˜•ì‹

**í•„ìˆ˜ ì»¬ëŸ¼:**
- `query` ë˜ëŠ” `query_text`: ì‚¬ìš©ìž ì¿¼ë¦¬ í…ìŠ¤íŠ¸
- `ground_truth_docs` ë˜ëŠ” `gt_docs`: ê´€ë ¨ ë¬¸ì„œ IDë“¤ (ì‰¼í‘œ êµ¬ë¶„ ë˜ëŠ” JSON ë°°ì—´)

**ì„ íƒì  ì»¬ëŸ¼:**
- `major`: ì „ê³µ
- `interest_job`: ê´€ì‹¬ ì§ë¬´ (ì‰¼í‘œ êµ¬ë¶„)
- `courses`: ìˆ˜ê°• ì´ë ¥ (ì‰¼í‘œ êµ¬ë¶„)
- `certification`: ìžê²©ì¦ (ì‰¼í‘œ êµ¬ë¶„)
- `club_activities`: ë™ì•„ë¦¬/ëŒ€ì™¸í™œë™ (ì‰¼í‘œ êµ¬ë¶„)
- `rec_idx`: ì±„ìš©ê³µê³  ì¸ë±ìŠ¤
- `company_name`: íšŒì‚¬ëª…
- `job_title`: ì±„ìš©ê³µê³  ì œëª©

### ë³€í™˜ ê²°ê³¼ ì˜ˆì‹œ

**ìž…ë ¥ CSV:**
```csv
query_text,gt_docs,major,interest_job
"ìƒëª…ê³µí•™ ì—°êµ¬ì› ì§€ì›í•©ë‹ˆë‹¤","50436465,50123456",ìƒëª…ê³µí•™,"ìƒëª…ê³µí•™ ì—°êµ¬ì›,ì œì•½íšŒì‚¬ ì—°êµ¬ê°œë°œ"
```

**ì¶œë ¥ JSONL:**
```json
{"query": "ìƒëª…ê³µí•™ ì—°êµ¬ì› ì§€ì›í•©ë‹ˆë‹¤", "ground_truth_docs": ["50436465", "50123456"], "user_profile": {"major": "ìƒëª…ê³µí•™", "interest_job": ["ìƒëª…ê³µí•™ ì—°êµ¬ì›", "ì œì•½íšŒì‚¬ ì—°êµ¬ê°œë°œ"]}}
```

## ðŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

**1. Docker ì‹¤í–‰ ì‹¤íŒ¨**
```bash
# Docker Desktop ì‹¤í–‰ í™•ì¸
docker ps

# ê¶Œí•œ ë¬¸ì œ ì‹œ
sudo docker compose build
```

**2. API í‚¤ ì˜¤ë¥˜**
```bash
# .env íŒŒì¼ í™•ì¸
cat .env | grep -E "(OPENAI|AWS)"
```

**3. ìž„ë² ë”© ìºì‹œ ë¬¸ì œ**
```bash
# ìºì‹œ ì‚­ì œ í›„ ìž¬ì‹¤í–‰
rm -rf cache/embeddings/text_embedding_ada_002_no_chunk
./run_experiment.sh configs/baseline.yaml
```

**4. ë©”ëª¨ë¦¬ ë¶€ì¡±**
```bash
# Docker ë©”ëª¨ë¦¬ ì„¤ì • í™•ì¸ (ìµœì†Œ 8GB ê¶Œìž¥)
docker system info | grep Memory
```

### ì‹¤í—˜ ì‹¤íŒ¨ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] .env íŒŒì¼ì— ì˜¬ë°”ë¥¸ API í‚¤ ì„¤ì •
- [ ] Docker Desktop ì‹¤í–‰ ì¤‘
- [ ] AWS S3 ì ‘ê·¼ ê¶Œí•œ í™•ì¸
- [ ] ì¶©ë¶„í•œ ë””ìŠ¤í¬ ê³µê°„ (ìºì‹œìš©)
- [ ] ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ

## ðŸ”® í–¥í›„ ê³„íš

### ì¶”ê°€ ì˜ˆì • ê¸°ëŠ¥
- [ ] **ë” ë§Žì€ ìž„ë² ë”© ëª¨ë¸**: Sentence-BERT, Cohere ë“±
- [ ] **ê³ ê¸‰ ì²­í‚¹ ì „ëžµ**: Semantic chunking, Token-based chunking
- [ ] **ë‹¤ì–‘í•œ ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜**: FAISS, Elasticsearch
- [ ] **LLM í’ˆì§ˆ í‰ê°€**: ìƒì„±ëœ ë‹µë³€ì˜ í’ˆì§ˆ ì¸¡ì •
- [ ] **í•˜ì´í¼íŒŒë¼ë¯¸í„° ìžë™ íŠœë‹**: Optuna ê¸°ë°˜ ìµœì í™”

### ì‹¤í—˜ í™•ìž¥ ë°©í–¥
- [ ] **A/B í…ŒìŠ¤íŠ¸**: ë‹¤ì–‘í•œ ì„¤ì • ì¡°í•©ì˜ ì„±ëŠ¥ ë¹„êµ
- [ ] **ì‚¬ìš©ìž í”¼ë“œë°± í†µí•©**: ì‹¤ì œ ì‚¬ìš©ìž ë§Œì¡±ë„ ì¸¡ì •
- [ ] **ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: í”„ë¡œë•ì…˜ í™˜ê²½ ì„±ëŠ¥ ì¶”ì 

## ðŸ“š ì°¸ê³  ìžë£Œ

- [Docker ê³µì‹ ë¬¸ì„œ](https://docs.docker.com/)
- [OpenAI Embeddings API](https://platform.openai.com/docs/guides/embeddings)
- [ChromaDB ë¬¸ì„œ](https://docs.trychroma.com/)
- [LangChain Text Splitters](https://python.langchain.com/docs/modules/data_connection/document_transformers/)
- [RAG í‰ê°€ ì§€í‘œ ê°€ì´ë“œ](https://docs.ragas.io/en/stable/concepts/metrics/)

## ðŸ“ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” Career-HY íŒ€ì˜ ë‚´ë¶€ ì‹¤í—˜ìš©ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

---

**ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ê°œì„  ì œì•ˆì€ íŒ€ ìŠ¬ëž™ ì±„ë„ë¡œ ì—°ë½ì£¼ì„¸ìš”!** ðŸš€